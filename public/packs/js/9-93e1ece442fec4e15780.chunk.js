(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{279:function(t,r,n){"use strict";function e(t){return e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}n.d(r,"a",(function(){return s})),n.d(r,"b",(function(){return x})),n.d(r,"c",(function(){return o})),n.d(r,"d",(function(){return O})),n.d(r,"e",(function(){return c})),n.d(r,"f",(function(){return u})),n.d(r,"g",(function(){return w})),n.d(r,"h",(function(){return d})),n.d(r,"i",(function(){return _})),n.d(r,"j",(function(){return f})),n.d(r,"k",(function(){return b})),n.d(r,"l",(function(){return l}));var o=function(t,r,n){var e;return function(){var o=null,i=arguments,a=function(){e=null,n||t.apply(o,i)},u=n&&!e;clearTimeout(e),e=window.setTimeout(a,r),u&&t.apply(o,i)}};function i(){return i=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},i.apply(this,arguments)}!function(t,r){t(r={exports:{}},r.exports)}((function(t){var r=function(t){var r,n=Object.prototype,o=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,r,n){return Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{l({},"")}catch(I){l=function(t,r,n){return t[r]=n}}function s(t,r,n,e){var o=r&&r.prototype instanceof y?r:y,i=Object.create(o.prototype),a=new N(e||[]);return i._invoke=function(t,r,n){var e=h;return function(o,i){if(e===d)throw new Error("Generator is already running");if(e===v){if("throw"===o)throw i;return F()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=O(a,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(e===h)throw e=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);e=d;var c=f(t,r,n);if("normal"===c.type){if(e=n.done?v:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(e=v,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function f(t,r,n){try{return{type:"normal",arg:t.call(r,n)}}catch(I){return{type:"throw",arg:I}}}t.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",m={};function y(){}function g(){}function w(){}var b={};b[a]=function(){return this};var _=Object.getPrototypeOf,x=_&&_(_(j([])));x&&x!==n&&o.call(x,a)&&(b=x);var L=w.prototype=y.prototype=Object.create(b);function E(t){["next","throw","return"].forEach((function(r){l(t,r,(function(t){return this._invoke(r,t)}))}))}function T(t,r){function n(i,a,u,c){var l=f(t[i],t,a);if("throw"!==l.type){var s=l.arg,h=s.value;return h&&"object"===e(h)&&o.call(h,"__await")?r.resolve(h.__await).then((function(t){n("next",t,u,c)}),(function(t){n("throw",t,u,c)})):r.resolve(h).then((function(t){s.value=t,u(s)}),(function(t){return n("throw",t,u,c)}))}c(l.arg)}var i;this._invoke=function(t,e){function o(){return new r((function(r,o){n(t,e,r,o)}))}return i=i?i.then(o,o):o()}}function O(t,n){var e=t.iterator[n.method];if(e===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=r,O(t,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=f(e,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=r),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function M(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function S(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function j(t){if(t){var n=t[a];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var e=-1,i=function n(){for(;++e<t.length;)if(o.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=r,n.done=!0,n};return i.next=i}}return{next:F}}function F(){return{value:r,done:!0}}return g.prototype=L.constructor=w,w.constructor=g,g.displayName=l(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"===typeof t&&t.constructor;return!!r&&(r===g||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,l(t,c,"GeneratorFunction")),t.prototype=Object.create(L),t},t.awrap=function(t){return{__await:t}},E(T.prototype),T.prototype[u]=function(){return this},t.AsyncIterator=T,t.async=function(r,n,e,o,i){void 0===i&&(i=Promise);var a=new T(s(r,n,e,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(L),l(L,c,"Generator"),L[a]=function(){return this},L.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var n in t)r.push(n);return r.reverse(),function n(){for(;r.length;){var e=r.pop();if(e in t)return n.value=e,n.done=!1,n}return n.done=!0,n}},t.values=j,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(S),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function e(e,o){return u.type="throw",u.arg=t,n.next=e,o&&(n.method="next",n.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return e("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return e(a.catchLoc,!0);if(this.prev<a.finallyLoc)return e(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return e(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return e(a.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc<=this.prev&&o.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var i=e;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),m},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),m}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===t){var e=n.completion;if("throw"===e.type){var o=e.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:j(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=r),m}},t}(t.exports);try{regeneratorRuntime=r}catch(n){Function("r","regeneratorRuntime = r")(r)}}));var a,u=function(t){var r=t.replace("#","");return.299*parseInt(r.slice(0,2),16)+.587*parseInt(r.slice(2,4),16)+.114*parseInt(r.slice(4,6),16)>186?"#000000":"#FFFFFF"},c=function(t){var r="";if(t>=60&&t<3600){var n=Math.floor(t/60);r=n+" Min";var e=60===n?0:Math.floor(t%60);return r+(e>0?" "+e+" Sec":"")}if(t>=3600&&t<86400){var o=Math.floor(t/3600);r=o+" Hr";var i=t%3600<60||24===o?0:Math.floor(t%3600/60);return r+(i>0?" "+i+" Min":"")}if(t>=86400){var a=Math.floor(t/86400);r=a+" Day";var u=t%86400<3600||a>=364?0:Math.floor(t%86400/3600);return r+(u>0?" "+u+" Hr":"")}return Math.floor(t)+" Sec"},l=function(t,r,n){void 0===t&&(t=""),void 0===r&&(r=1024),void 0===n&&(n=!1);var e=t;return t.length>r&&(e=t.substring(0,r)),n&&(e+="..."),e},s=function(t,r){return null===t||0===t?{time:"",unit:""}:t<3600?{time:Number((t/60).toFixed(1)),unit:r.minute}:t<86400?{time:Number((t/3600).toFixed(1)),unit:r.hour}:{time:Number((t/86400).toFixed(1)),unit:r.day}};function f(t){try{var r=String(t).toLowerCase();return Boolean(JSON.parse(r))}catch(n){return!1}}function h(t){return t.slice().sort((function(t,r){return t-r}))}function p(t,r){var n,e,o,i=(e=1,(o=r)<(n=0)?n:o>e?e:o),a=(t.length-1)*i,u=Math.floor(a),c=a-u;return void 0!==t[u+1]?t[u]+c*(t[u+1]-t[u]):t[u]}!function(t){t[t.INCOMING=0]="INCOMING",t[t.OUTGOING=1]="OUTGOING",t[t.ACTIVITY=2]="ACTIVITY",t[t.TEMPLATE=3]="TEMPLATE"}(a||(a={}));var d=function(t,r){var n=h(t);return r.map((function(t){return p(n,t)}))},v=/{{(.*?)}}/g,m=function(t){return t?t.split(" ").map((function(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""})).join(" "):""},y=function(t){var r=t.user,n=null!=r&&r.name?r.name.split(" ").shift():"";return m(n)},g=function(t){var r=t.user;if(r&&r.name){var n=r.name.split(" ").length>1?r.name.split(" ").pop():"";return m(n)}return""},w=function(t){var r,n=t.conversation,e=t.contact,o=n.meta,a=o.assignee,u=o.sender,c=n.id,l=n.custom_attributes,s=void 0===l?{}:l,f=(e||{}).custom_attributes;return i({},{"contact.name":m((null==u?void 0:u.name)||""),"contact.first_name":y({user:u}),"contact.last_name":g({user:u}),"contact.email":null==u?void 0:u.email,"contact.phone":null==u?void 0:u.phone_number,"contact.id":null==u?void 0:u.id,"conversation.id":c,"agent.name":m((null==a?void 0:a.name)||""),"agent.first_name":y({user:a}),"agent.last_name":g({user:a}),"agent.email":null!=(r=null==a?void 0:a.email)?r:""},Object.entries(null!=s?s:{}).reduce((function(t,r){var n=r[0],e=r[1];return t["conversation.custom_attribute."+n]=e,t}),{}),Object.entries(null!=f?f:{}).reduce((function(t,r){var n=r[0],e=r[1];return t["contact.custom_attribute."+n]=e,t}),{}))},b=function(t){var r=t.message,n=t.variables;return null==r?void 0:r.replace(v,(function(t,r){return n[r.trim()]?n[r.trim().toLowerCase()]:""}))},_=function(t){var r=t.message,n=t.variables,e=r.replace(/```(?:.|\n)+?```/g,"").match(v);return e?e.map((function(t){return t.replace("{{","").replace("}}","").trim()})).filter((function(t){return void 0===n[t]})):[]},x=function(t,r,n){var e=null,o=function(){e&&(clearTimeout(e),e=null,r())},i=function(){e&&clearTimeout(e),e=setTimeout((function(){o()}),n)};return{start:function(){e||t(),i()},stop:o}},L=function(t,r){return null===r?null:t+r-Math.floor(Date.now()/1e3)},E=function(t){var r={y:31536e3,mo:2592e3,d:86400,h:3600,m:60};if(t<60)return"1m";var n=[];return Object.keys(r).forEach((function(e){var o=Math.floor(t/r[e]);t<60&&n.length>0||2!==n.length&&o>0&&(n.push(o+e),t-=o*r[e])})),n.join(" ")},T=function(t,r){return["FRT","NRT","RT"].map((function(n){return function(t,r,n){var e=r.sla_first_response_time_threshold,o=r.sla_next_response_time_threshold,a=r.sla_resolution_time_threshold,u=r.created_at,c=n.first_reply_created_at,l=n.waiting_since,s=n.status,f={FRT:{threshold:L(u,e),condition:null!==e&&(!c||0===c)},NRT:{threshold:L(l,o),condition:null!==o&&!!c&&!!l},RT:{threshold:L(u,a),condition:"open"===s&&null!==a}}[t];return f?i({},f,{type:t}):null}(n,t,r)})).filter((function(t){return!!t&&t.condition})).map((function(t){return i({},t,{icon:t.threshold<=0?"flame":"alarm",isSlaMissed:t.threshold<=0})}))},O=function(t){var r=t.appliedSla,n=t.chat;if(!r||!n)return{type:"",threshold:"",icon:"",isSlaMissed:!1};var e=function(t){return t.sort((function(t,r){return Math.abs(t.threshold)-Math.abs(r.threshold)})),t[0]}(T(r,n));return e?{type:null==e?void 0:e.type,threshold:E(e.threshold<=0?-e.threshold:e.threshold),icon:e.icon,isSlaMissed:e.isSlaMissed}:{type:"",threshold:"",icon:"",isSlaMissed:!1}}}}]);